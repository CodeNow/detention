doctype html
html(
  lang = "en"
)
  head
    meta(
      charset = "utf-8"
    )
    meta(
      content = "width=device-width, initial-scale=1"
      name = "viewport"
    )
    title Uh oh
    //- css
    link(
      href = "/stylesheets/error.css?v=#{localVersion}"
      media = "screen"
      rel = "stylesheet"
    )
    //- favicon
    link(
      href = "/images/favicon.png"
      rel = "shortcut icon"
    )
    meta(
      console = "Runnable"
      name = "apple-mobile-web-app-title"
    )
    script.
      var uri = window.location.toString();
      if (uri.indexOf("?") > 0)
        var clean_uri = uri.substring(0, uri.indexOf("?"));
        window.history.replaceState({}, document.title, clean_uri);

      // This is for redirecting to a relative port
      document.addEventListener('click', function(event) {
        var target = event.target;
        if (target.tagName.toLowerCase() == 'a')
        {
          var port = target.getAttribute('href').match(/^:(\d+)(.*)/);
          if (port)
          {
            target.href = port[2];
            target.port = port[1];
          }
        }
      }, false);


  body.error-wrapper
    .error-content
      block content
